import"./bootstrap.esm-191b8220.js";document.addEventListener("turbo:load",(()=>{const e=document.getElementById("prompt"),t=document.getElementById("chat-container"),o=document.getElementById("chat-indicator"),n=document.getElementById("call-gpt-api"),c=(new Date).getHours();let s;function d(){o.style.display="none"}s=c<12?"Good morning":c<18?"Good afternoon":"Good evening",document.getElementById("greeting").innerHTML=s,n.addEventListener("submit",(n=>{n.preventDefault();const c=e.value.trim();if(""===c)return;!function(e,o){const n=document.createElement("div");n.classList.add("chat-bubble",e);const c=document.createElement("p");c.innerText=o,n.appendChild(c),t.appendChild(n),t.scrollBottom=t.scrollHeight}("user",c),e.value="",o.style.display="flex";fetch("https://openai80.p.rapidapi.com/chat/completions",{method:"POST",headers:{"content-type":"application/json","X-RapidAPI-Key":"5006587f3dmshcdcc56d3e31c495p19681djsn4a9f5cfa3930","X-RapidAPI-Host":"openai80.p.rapidapi.com"},body:`{"model":"gpt-3.5-turbo","messages":[{"role":"user","content":"${c}"}]}`}).then((e=>e.json())).then((e=>{if(d(),e.choices&&e.choices.length>0){!function(e){const o=e.trim(),n=document.createElement("div");n.classList.add("chat-bubble","bot"),t.appendChild(n);const c=document.createElement("p");n.appendChild(c);const s=o.split(" ");let d=0;const l=()=>{d<s.length?(c.innerText+=s[d],d<s.length-1&&(c.innerText+=" "),d++,setTimeout((()=>{l()}),Math.floor(200*Math.random())+50)):(c.innerText=o,t.scrollTop=t.scrollHeight)};l()}(e.choices[0].message.content)}else console.error("No response from the API")})).catch((e=>{d(),console.error(e)}))}));const l=e=>{e.querySelector(".dropdown-menu").classList.toggle("show")};document.querySelectorAll(".dropdown-toggle").forEach((e=>{e.addEventListener("click",(()=>{const t=e.closest(".dropdown");l(t)}))})),document.addEventListener("click",(e=>{document.querySelectorAll(".dropdown").forEach((t=>{if(!t.contains(e.target)){const e=t.querySelector(".dropdown-menu");e.classList.contains("show")&&e.classList.remove("show")}}))}));document.querySelectorAll(".dropdown-menu li a").forEach((e=>{e.addEventListener("click",(()=>{const t=e.closest(".dropdown");l(t)}))}))}));
