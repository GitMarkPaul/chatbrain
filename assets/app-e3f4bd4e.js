import"./bootstrap.esm-191b8220.js";document.addEventListener("turbo:load",(()=>{const e=document.getElementById("prompt"),t=document.getElementById("chat-container"),n=document.getElementById("chat-indicator"),o=document.getElementById("call-gpt-api"),c=(new Date).getHours();let s;function d(){n.style.display="none"}s=c<12?"Good morning":c<18?"Good afternoon":"Good evening",document.getElementById("greeting").innerHTML=s,o.addEventListener("submit",(o=>{o.preventDefault();const c=e.value.trim();if(""===c)return;!function(e,n){const o=document.createElement("div");o.classList.add("chat-bubble",e);const c=document.createElement("p");c.innerText=n,o.appendChild(c),t.appendChild(o),t.scrollBottom=t.scrollHeight}("user",c),e.value="",n.style.display="flex";fetch("https://openai80.p.rapidapi.com/chat/completions",{method:"POST",headers:{"content-type":"application/json","X-RapidAPI-Key":"5006587f3dmshcdcc56d3e31c495p19681djsn4a9f5cfa3930","X-RapidAPI-Host":"openai80.p.rapidapi.com"},body:`{"model":"gpt-3.5-turbo","messages":[{"role":"user","content":"${c}"}]}`}).then((e=>e.json())).then((e=>{if(d(),e.choices&&e.choices.length>0){!function(e){const n=e.trim(),o=document.createElement("div");o.classList.add("chat-bubble","bot"),t.appendChild(o);const c=document.createElement("p");o.appendChild(c);const s=n.split(" ");let d=0;const a=()=>{d<s.length?(c.innerText+=s[d],d<s.length-1&&(c.innerText+=" "),d++,setTimeout((()=>{a()}),Math.floor(200*Math.random())+50)):(c.innerText=n,t.scrollTop=t.scrollHeight)};a()}(e.choices[0].message.content)}else console.error("No response from the API")})).catch((e=>{d(),console.error(e)}))}))}));
